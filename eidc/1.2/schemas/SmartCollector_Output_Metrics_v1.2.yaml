title: "NRDOT+ Smart Collector Output Metrics Schema"
description: "Defines the schema for metrics output by the NRDOT+ Smart Collector component"
version: "1.2.0"
metrics:
  - name: "process.cpu.time"
    description: "Total CPU time consumed by the process"
    type: "sum"
    unit: "s"
    attributes:
      - name: "pid"
        description: "Process ID"
        type: "int"
        required: true
      - name: "process.executable.name"
        description: "Name of the executable"
        type: "string"
        required: true
      - name: "process.start_time_ns"
        description: "Process start time in nanoseconds since Unix epoch"
        type: "int"
        required: true
      - name: "host.id"
        description: "Host identifier"
        type: "string"
        required: true
      - name: "process.category"
        description: "Classification of the process (system, user, etc.)"
        type: "string"
        required: true
        enum: ["system", "daemon", "service", "job", "user", "unknown"]
      - name: "process.priority"
        description: "Priority class of the process (high, low, etc.)"
        type: "string"
        required: false
        enum: ["high", "normal", "low", "background"]
    aggregation:
      temporality: "delta"
      monotonic: true

  - name: "process.memory.usage"
    description: "Memory used by the process"
    type: "gauge"
    unit: "bytes"
    attributes:
      - name: "pid"
        description: "Process ID"
        type: "int"
        required: true
      - name: "process.executable.name"
        description: "Name of the executable"
        type: "string"
        required: true
      - name: "process.start_time_ns"
        description: "Process start time in nanoseconds since Unix epoch"
        type: "int"
        required: true
      - name: "host.id"
        description: "Host identifier"
        type: "string"
        required: true
      - name: "process.category"
        description: "Classification of the process (system, user, etc.)"
        type: "string"
        required: true
        enum: ["system", "daemon", "service", "job", "user", "unknown"]
      - name: "memory.type"
        description: "Type of memory measurement"
        type: "string"
        required: true
        enum: ["rss", "virtual", "shared", "private", "swap"]

  - name: "process.aggregated.other.count"
    description: "Count of additional processes that didn't meet inclusion criteria"
    type: "gauge"
    attributes:
      - name: "host.id"
        description: "Host identifier"
        type: "string"
        required: true
      - name: "process.category"
        description: "Classification of the processes in this group"
        type: "string"
        required: true
        enum: ["system", "daemon", "service", "job", "user", "unknown"]

examples:
  - name: "process.cpu.time"
    attributes:
      pid: 1234
      "process.executable.name": "nginx"
      "process.start_time_ns": 1651234567890123456
      "host.id": "host-abc123"
      "process.category": "service"
      "process.priority": "normal"
    value: 0.856

  - name: "process.memory.usage"
    attributes:
      pid: 1234
      "process.executable.name": "nginx"
      "process.start_time_ns": 1651234567890123456
      "host.id": "host-abc123"
      "process.category": "service"
      "memory.type": "rss"
    value: 52428800

security:
  pii_fields: ["process.executable.name"]
  privacy_notes: "Process executable names may reveal sensitive information about user activity or system configuration. Classification filter ensures appropriate scoping."
